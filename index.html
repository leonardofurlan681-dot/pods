<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loja Moderna</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="nav">
    <div class="logo">LOJA</div>
    <nav>
      <a href="#inicio">Início</a>
      <a href="#produtos">Produtos</a>
      <a href="javascript:openCart()" class="cart-pill">
        Carrinho (<span id="cartCount">0</span>)
      </a>
    </nav>
  </div>
</header>

<main id="inicio">
  <section class="hero">
    <div>
      <h1>Design moderno. Compra simples.</h1>
      <p>Loja inspirada em grandes marcas, pronta para GitHub Pages.</p>
    </div>
    <div class="hero-visual"></div>
  </section>

  <section id="produtos" class="section">
    <h2>Produtos</h2>
    <div id="grid" class="grid"></div>
  </section>
</main>

<!-- MODAL CARRINHO -->
<div id="overlay" class="overlay" onclick="closeCart()">
  <div class="modal" onclick="event.stopPropagation()">
    <h3>Seu carrinho</h3>
    <div id="cartList"></div>
    <div class="total">
      <span>Subtotal</span>
      <span id="cartSubtotal">R$ 0,00</span>
    </div>
    <div class="footer">
      <button class="btn-cart" onclick="closeCart()">Continuar comprando</button>
      <button class="btn-buy" onclick="openCheckout()">Ir para checkout</button>
    </div>
  </div>
</div>

<!-- MODAL CHECKOUT -->
<div id="checkoutOverlay" class="overlay" onclick="closeCheckout()">
  <div class="modal" onclick="event.stopPropagation()">
    <h3>Checkout</h3>

    <input id="cep" placeholder="CEP">
    <input id="numero" placeholder="Número da residência">

    <div class="cart-item">
      <span>Frete</span>
      <strong>R$ 15,00</strong>
    </div>

    <div class="total">
      <span>Total</span>
      <span id="checkoutTotal">R$ 0,00</span>
    </div>

    <div class="footer">
      <button class="btn-cart" onclick="closeCheckout()">Voltar</button>
      <button class="btn-buy" onclick="pay()">Pagar</button>
    </div>
  </div>
</div>

<script>
const products = Array.from({ length: 30 }).map((_, i) => ({
  id: i + 1,
  name: `Produto ${i + 1}`,
  price: 149.9 + (i % 5) * 20,
  img: `https://picsum.photos/seed/p${i+1}/600`
}));

const grid = document.getElementById('grid');
const cartCount = document.getElementById('cartCount');
const cartList = document.getElementById('cartList');
const cartSubtotal = document.getElementById('cartSubtotal');
const checkoutTotal = document.getElementById('checkoutTotal');
const overlay = document.getElementById('overlay');
const checkoutOverlay = document.getElementById('checkoutOverlay');

let cart = [];

function renderProducts() {
  grid.innerHTML = '';
  products.forEach(p => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.img}">
      <h3>${p.name}</h3>
      <div class="price">R$ ${p.price.toFixed(2)}</div>
      <div class="actions">
        <button class="btn-cart" onclick="addToCart(${p.id})">Adicionar</button>
        <button class="btn-buy" onclick="buyNow(${p.id})">Comprar</button>
      </div>
    `;
    grid.appendChild(card);
  });
}

function addToCart(id) {
  cart.push(products.find(p => p.id === id));
  updateCart();
}

function buyNow(id) {
  cart = [products.find(p => p.id === id)];
  updateCart();
  openCart();
}

function updateCart() {
  cartCount.textContent = cart.length;
  cartList.innerHTML = '';
  let subtotal = 0;

  cart.forEach(item => {
    subtotal += item.price;
    cartList.innerHTML += `
      <div class="cart-item">
        <span>${item.name}</span>
        <strong>R$ ${item.price.toFixed(2)}</strong>
      </div>
    `;
  });

  cartSubtotal.textContent = `R$ ${subtotal.toFixed(2)}`;
  checkoutTotal.textContent = `R$ ${(subtotal + 15).toFixed(2)}`;
}

function openCart() {
  overlay.style.display = 'flex';
}

function closeCart() {
  overlay.style.display = 'none';
}

function openCheckout() {
  overlay.style.display = 'none';
  checkoutOverlay.style.display = 'flex';
}

function closeCheckout() {
  checkoutOverlay.style.display = 'none';
}

function pay() {
  if (!cep.value || !numero.value) {
    alert('Preencha CEP e número');
    return;
  }
  alert('Pagamento pronto para integração real!');
}

renderProducts();
</script>

</body>
</html>
